---
import { SITE } from '@/config';
import LinkButton from '@/components/LinkButton.astro';
import IconChevronLeft from '@/assets/icons/IconChevronLeft.svg';
import { getCurrentLocale, useTranslations, getLocalizedHref } from '@/utils/i18n';

const locale = getCurrentLocale(Astro);
const t = useTranslations(locale);
---

{
  SITE.showBackButton && (
    <div class="app-layout flex items-center justify-start">
      <LinkButton
        id="back-button"
        href={getLocalizedHref(locale, '/')}
        class="focus-outline -ms-2 mt-8 mb-2 hover:text-foreground/75"
      >
        <IconChevronLeft class="inline-block size-6 rtl:rotate-180" />
        <span>{t('post.back')}</span>
      </LinkButton>
    </div>
  )
}

<script>
  /* Update Search Praam */
  function updateGoBackUrl() {
    const backButton: HTMLAnchorElement | null = document.querySelector('#back-button');

    const backUrl = sessionStorage.getItem('backUrl');

    if (backUrl && backButton) {
      backButton.href = backUrl;
    }
  }

  document.addEventListener('astro:page-load', updateGoBackUrl);
  updateGoBackUrl();
</script>
